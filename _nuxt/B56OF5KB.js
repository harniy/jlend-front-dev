import{l as C,S as F,m as G,n as V,p as J,q as P,r as L,v as K,x as T,O as m,y as j,z,A as Y,B as Q,E as Z,F as ee,G as te,H as se,I as ne,J as re,K as v,L as oe,M as ie,N as ae,Q as ce,T as k,U as le,V as I,W as de,X as g,Y as S,Z as b,$ as w,a0 as R,a1 as f,a2 as u,a3 as h,a4 as y,a5 as l,a6 as A,a7 as x,a8 as M,a9 as N,aa as E}from"./_bNdCwc-.js";import{ad as Je,ac as je,ab as ze}from"./_bNdCwc-.js";import{p as a}from"./EEsBwWkj.js";import"./CFNTmiT0.js";var ue={now:function(){return Date.now()}},he=function(r){C(e,r);function e(t,s){return r.call(this)||this}return e.prototype.schedule=function(t,s){return this},e}(F),U={setInterval:function(r,e){for(var t=[],s=2;s<arguments.length;s++)t[s-2]=arguments[s];return setInterval.apply(void 0,G([r,e],V(t)))},clearInterval:function(r){return clearInterval(r)},delegate:void 0},we=function(r){C(e,r);function e(t,s){var n=r.call(this,t,s)||this;return n.scheduler=t,n.work=s,n.pending=!1,n}return e.prototype.schedule=function(t,s){var n;if(s===void 0&&(s=0),this.closed)return this;this.state=t;var o=this.id,i=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(i,o,s)),this.pending=!0,this.delay=s,this.id=(n=this.id)!==null&&n!==void 0?n:this.requestAsyncId(i,this.id,s),this},e.prototype.requestAsyncId=function(t,s,n){return n===void 0&&(n=0),U.setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,s,n){if(n===void 0&&(n=0),n!=null&&this.delay===n&&this.pending===!1)return s;s!=null&&U.clearInterval(s)},e.prototype.execute=function(t,s){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,s);if(n)return n;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,s){var n=!1,o;try{this.work(t)}catch(i){n=!0,o=i||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),o},e.prototype.unsubscribe=function(){if(!this.closed){var t=this,s=t.id,n=t.scheduler,o=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,J(o,this),s!=null&&(this.id=this.recycleAsyncId(n,s,null)),this.delay=null,r.prototype.unsubscribe.call(this)}},e}(he),W=function(){function r(e,t){t===void 0&&(t=r.now),this.schedulerActionCtor=e,this.now=t}return r.prototype.schedule=function(e,t,s){return t===void 0&&(t=0),new this.schedulerActionCtor(this,e).schedule(s,t)},r.now=ue.now,r}(),pe=function(r){C(e,r);function e(t,s){s===void 0&&(s=W.now);var n=r.call(this,t,s)||this;return n.actions=[],n._active=!1,n}return e.prototype.flush=function(t){var s=this.actions;if(this._active){s.push(t);return}var n;this._active=!0;do if(n=t.execute(t.state,t.delay))break;while(t=s.shift());if(this._active=!1,n){for(;t=s.shift();)t.unsubscribe();throw n}},e}(W),ge=new pe(we),fe=ge;function H(r){return r&&P(r.schedule)}function ye(r){return r[r.length-1]}function be(r){return H(ye(r))?r.pop():void 0}function p(r,e,t,s,n){s===void 0&&(s=0),n===void 0&&(n=!1);var o=e.schedule(function(){t(),n?r.add(this.schedule(null,s)):this.unsubscribe()},s);if(r.add(o),!n)return o}function D(r,e){return e===void 0&&(e=0),L(function(t,s){t.subscribe(K(s,function(n){return p(s,r,function(){return s.next(n)},e)},function(){return p(s,r,function(){return s.complete()},e)},function(n){return p(s,r,function(){return s.error(n)},e)}))})}function X(r,e){return e===void 0&&(e=0),L(function(t,s){s.add(r.schedule(function(){return t.subscribe(s)},e))})}function me(r,e){return T(r).pipe(X(e),D(e))}function ve(r,e){return T(r).pipe(X(e),D(e))}function Ee(r,e){return new m(function(t){var s=0;return e.schedule(function(){s===r.length?t.complete():(t.next(r[s++]),t.closed||this.schedule())})})}function Te(r,e){return new m(function(t){var s;return p(t,e,function(){s=r[j](),p(t,e,function(){var n,o,i;try{n=s.next(),o=n.value,i=n.done}catch(c){t.error(c);return}i?t.complete():t.next(o)},0,!0)}),function(){return P(s?.return)&&s.return()}})}function q(r,e){if(!r)throw new Error("Iterable cannot be null");return new m(function(t){p(t,e,function(){var s=r[Symbol.asyncIterator]();p(t,e,function(){s.next().then(function(n){n.done?t.complete():t.next(n.value)})},0,!0)})})}function ke(r,e){return q(z(r),e)}function Ae(r,e){if(r!=null){if(Y(r))return me(r,e);if(Q(r))return Ee(r,e);if(Z(r))return ve(r,e);if(ee(r))return q(r,e);if(te(r))return Te(r,e);if(se(r))return ke(r,e)}throw ne(r)}function xe(r,e){return e?Ae(r,e):T(r)}function B(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=be(r);return xe(r,t)}function $(r,e){var t=P(r)?r:function(){return r},s=function(n){return n.error(t())};return new m(s)}function Ce(r){return r instanceof Date&&!isNaN(r)}function Pe(r,e,t){t===void 0&&(t=fe);var s=-1;return H(e)?t=e:s=e,new m(function(n){var o=Ce(r)?+r-t.now():r;o<0&&(o=0);var i=0;return t.schedule(function(){n.closed||(n.next(i++),0<=s?this.schedule(void 0,s):n.complete())},o)})}function d(r){return L(function(e,t){T(r).subscribe(K(t,function(){return t.complete()},re)),!t.closed&&e.subscribe(t)})}class Oe{get selectedModule(){const{selectedModuleId:e}=v.getValue();if(!e)throw{code:-3,message:"Please set the wallet first"};const t=this.modules.find(s=>s.productId===e);if(!t)throw{code:-3,message:"Please set the wallet first"};return t}constructor(e){this.modules=e.modules,e.selectedWalletId&&this.setWallet(e.selectedWalletId),oe(e.network);const t=e.theme||e.modalTheme;t&&ie(t),e.buttonTheme&&ae(e.buttonTheme),this.getSupportedWallets().then(s=>{ce(s)})}async getSupportedWallets(){return Promise.all(this.modules.map(async e=>{const t=new Promise(s=>setTimeout(()=>s(!1),500));return{id:e.productId,name:e.productName,type:e.moduleType,icon:e.productIcon,isAvailable:await Promise.race([t,e.isAvailable()]),url:e.productUrl}}))}setWallet(e){const t=this.modules.find(s=>s.productId===e);if(!t)throw new Error(`Wallet id "${e}" is not supported`);k(t.productId)}async getAddress(e){const{address:t}=await this.selectedModule.getAddress(e);return le(t),{address:t}}async signTransaction(e,t){return this.selectedModule.signTransaction(e,{...t,networkPassphrase:t?.networkPassphrase||v.getValue().selectedNetwork})}async signAuthEntry(e,t){return this.selectedModule.signAuthEntry(e,{...t,networkPassphrase:t?.networkPassphrase||v.getValue().selectedNetwork})}async signMessage(e,t){return this.selectedModule.signMessage(e,{...t,networkPassphrase:t?.networkPassphrase||v.getValue().selectedNetwork})}async getNetwork(){return this.selectedModule.getNetwork()}async disconnect(){I()}isButtonCreated(){return!!this.buttonElement}assignButtons(e){const t=typeof e.connectEl=="string"?document.querySelector(e.connectEl):e.connectEl;if(!t)throw new Error("connectEl is not available");if(t.addEventListener("click",()=>{this.openModal({onWalletSelected:n=>{k(n.id),this.getAddress().then(o=>e.onConnect(o))}}).then()},!1),!e.disconnectEl)return;const s=typeof e.disconnectEl=="string"?document.querySelector(e.disconnectEl):e.disconnectEl;if(!s)throw new Error("disconnectEl is not available");s.addEventListener("click",()=>{e.onDisconnect(),I(),this.selectedModule.disconnect&&this.selectedModule.disconnect().then()},!1)}async createButton(e){if(this.buttonElement)throw new Error("Stellar Wallets Kit button is already created");this.buttonElement=document.createElement("stellar-wallets-button"),e.buttonText&&this.buttonElement.setAttribute("buttonText",e.buttonText),e.horizonUrl&&de(e.horizonUrl),e.container.appendChild(this.buttonElement),this.buttonElement.addEventListener("button-clicked",()=>{this.openModal({onWalletSelected:t=>{k(t.id),this.getAddress().then(s=>e.onConnect(s)).catch(s=>{e.onError&&e.onError(s)})},onClosed:t=>{e.onClosed&&e.onClosed(t)}})},!1),this.buttonElement.addEventListener("disconnect-wallet",()=>{e.onDisconnect(),this.selectedModule.disconnect&&this.selectedModule.disconnect()},!1)}async removeButton(e){if(!this.buttonElement)throw new Error("Stellar Wallets Kit button hasn't been created yet");e?.skipDisconnect!==!0&&this.buttonElement.disconnect(),this.buttonElement.remove(),delete this.buttonElement}async openModal(e){if(this.modalElement&&!this.buttonElement)throw new Error("Stellar Wallets Kit modal is already open");this.modalElement=document.createElement("stellar-wallets-modal"),this.modalElement.setAttribute("showModal",""),e.modalTitle&&this.modalElement.setAttribute("modalTitle",e.modalTitle),e.notAvailableText&&this.modalElement.setAttribute("notAvailableText",e.notAvailableText),document.body.appendChild(this.modalElement);const t=n=>{e.onWalletSelected(n.detail),this.modalElement.removeEventListener("wallet-selected",t,!1),document.body.removeChild(this.modalElement),this.modalElement=void 0};this.modalElement.addEventListener("wallet-selected",t,!1);const s=n=>{e.onClosed&&e.onClosed(n.detail),this.modalElement.removeEventListener("wallet-selected",t,!1),this.modalElement.removeEventListener("modal-closed",s,!1),document.body.removeChild(this.modalElement),this.modalElement=void 0};this.modalElement.addEventListener("modal-closed",s,!1)}}const Le="albedo";class _e{constructor(){this.moduleType=g.HOT_WALLET,this.productId=Le,this.productName="Albedo",this.productUrl="https://albedo.link/",this.productIcon="https://stellar.creit.tech/wallet-icons/albedo.png"}async isAvailable(){return!0}async getAddress(){return S.publicKey({}).then(e=>({address:e.pubkey})).catch(e=>{throw a(e)})}async signTransaction(e,t){return S.tx({xdr:e,pubkey:t?.address,network:t?.networkPassphrase?t.networkPassphrase===b.PUBLIC?"public":"testnet":void 0}).then(({signed_envelope_xdr:s})=>({signedTxXdr:s,signerAddress:t?.address})).catch(s=>{throw a(s)})}async signAuthEntry(){throw{code:-3,message:'Albedo does not support the "signAuthEntry" function'}}async signMessage(){throw{code:-3,message:'Albedo does not support the "signMessage" function'}}async getNetwork(){throw{code:-3,message:'Albedo does not support the "getNetwork" function'}}}const Ie="freighter";class Ke{constructor(){this.moduleType=g.HOT_WALLET,this.productId=Ie,this.productName="Freighter",this.productUrl="https://freighter.app",this.productIcon="https://stellar.creit.tech/wallet-icons/freighter.png"}async runChecks(){if(!await this.isAvailable())throw new Error("Freighter is not connected")}async isAvailable(){return w.isConnected().then(({isConnected:e,error:t})=>!t&&e).catch(()=>!1)}async getAddress(){return this.runChecks().then(()=>w.requestAccess()).then(()=>w.getAddress()).then(({address:e,error:t})=>{if(t)throw t;return{address:e}}).catch(e=>{throw a(e)})}async signTransaction(e,t){return this.runChecks().then(async()=>{const{signedTxXdr:s,signerAddress:n,error:o}=await w.signTransaction(e,{address:t?.address,networkPassphrase:t?.networkPassphrase});if(o)throw o;return{signedTxXdr:s,signerAddress:n}}).catch(s=>{throw a(s)})}async signAuthEntry(e,t){return this.runChecks().then(async()=>{const{signedAuthEntry:s,signerAddress:n,error:o}=await w.signAuthEntry(e,{address:t?.address,networkPassphrase:t?.networkPassphrase});if(o||!s)throw o;return{signedAuthEntry:R.Buffer.from(s).toString("base64"),signerAddress:n}}).catch(s=>{throw a(s)})}async signMessage(e,t){return this.runChecks().then(async()=>{const{signedMessage:s,signerAddress:n,error:o}=await w.signMessage(e,{address:t?.address,networkPassphrase:t?.networkPassphrase});if(o||!s)throw o;return{signedMessage:R.Buffer.from(s).toString("base64"),signerAddress:n}}).catch(s=>{throw a(s)})}async getNetwork(){return this.runChecks().then(async()=>{const{network:e,networkPassphrase:t,error:s}=await w.getNetwork();if(s)throw s;return{network:e,networkPassphrase:t}}).catch(e=>{throw a(e)})}}const Se="lobstr";class He{constructor(){this.moduleType=g.HOT_WALLET,this.productId=Se,this.productName="LOBSTR",this.productUrl="https://lobstr.co",this.productIcon="https://stellar.creit.tech/wallet-icons/lobstr.png"}async isAvailable(){return f.isConnected()}async getAddress(){return(async()=>{if(!await f.isConnected())throw new Error("Lobstr is not connected")})().then(()=>f.getPublicKey()).then(t=>({address:t})).catch(t=>{throw a(t)})}async signTransaction(e,t){return(async()=>{if(!await f.isConnected())throw new Error("Lobstr is not connected");t?.address&&console.warn("Lobstr doesn't allow specifying what public key should sign the transaction, we skip the value"),t?.networkPassphrase&&console.warn("Lobstr doesn't allow specifying the network that should be used, we skip the value")})().then(()=>f.signTransaction(e)).then(n=>({signedTxXdr:n})).catch(n=>{throw a(n)})}async signAuthEntry(){throw{code:-3,message:'Lobstr does not support the "signAuthEntry" function'}}async signMessage(){throw{code:-3,message:'Lobstr does not support the "signMessage" function'}}async getNetwork(){throw{code:-3,message:'Lobstr does not support the "getNetwork" function'}}}const Re="rabet";class De{constructor(){this.moduleType=g.HOT_WALLET,this.productId=Re,this.productName="Rabet",this.productUrl="https://rabet.io/",this.productIcon="https://stellar.creit.tech/wallet-icons/rabet.png"}isAvailable(){return new Promise(e=>{setTimeout(()=>{e(typeof window<"u"&&!!window.rabet)},100)})}async getAddress(){return(async()=>{if(!await this.isAvailable())throw new Error("Rabet is not installed")})().then(()=>window.rabet.connect()).then(({publicKey:t})=>({address:t})).catch(t=>{throw a(t)})}async signTransaction(e,t){const s=async()=>{if(!await this.isAvailable())throw new Error("Rabet is not installed");if(t?.address&&t.networkPassphrase!==b.PUBLIC&&t.networkPassphrase!==b.TESTNET)throw new Error(`Rabet doesn't support the network: ${t.networkPassphrase}`);t?.address&&console.warn("Rabet doesn't allow specifying the network that should be used, we skip the value")},n=async()=>window.rabet.sign(e,t?.networkPassphrase===b.PUBLIC?"mainnet":"testnet");return s().then(n).then(o=>({signedTxXdr:o?.xdr})).catch(o=>{throw a(o)})}async signAuthEntry(){throw{code:-3,message:'Rabet does not support the "signAuthEntry" function'}}async signMessage(){throw{code:-3,message:'Rabet does not support the "signMessage" function'}}async getNetwork(){throw{code:-3,message:'Rabet does not support the "getNetwork" function'}}}class O{constructor(){this.isConnected=!1}sendEventToContentScript(e,t,s){return new Promise(n=>{const o=i=>{i.source!==window||!i.data||i.origin!==window.origin||i.data.eventId===s&&(n(i),window.removeEventListener("message",o,!1))};window.addEventListener("message",o,!1),window.webkit.messageHandlers.cordova_iab.postMessage(JSON.stringify({type:e,eventId:s,detail:t}))})}async enableConnection(){const e={origin:window.origin,host:window.location.host,permissions:{canRequestPublicKey:!0,canRequestSign:!0}},t=await this.sendEventToContentScript(u.XBULL_CONNECT,e,crypto.randomUUID()),{detail:s}=t.data;if(!s||s.error)throw{code:s?.code||-1,message:s?.errorMessage||"Unexpected error"};this.isConnected=!0}async getAddress(){try{await this.enableConnection()}catch(n){return{error:{code:n?.code||-1,message:n?.message||"Unexpected error"}}}const e={origin:window.origin,host:window.location.host},t=await this.sendEventToContentScript(u.XBULL_GET_PUBLIC_KEY,e,crypto.randomUUID()),{detail:s}=t.data;return!s||s.error?{error:{code:s?.code||-1,message:s?.errorMessage||"Unexpected error"}}:{address:s.payload}}async signTransaction(e){if(e.opts?.submit||e.opts?.submitUrl)return{error:{code:-1,message:"Parameters `submit` and `submitUrl` are not supported"}};try{await this.enableConnection()}catch(o){return{error:{code:o?.code||-1,message:o?.message||"Unexpected error"}}}const t={origin:window.origin,host:window.location.host,network:e.opts?.networkPassphrase,publicKey:e.opts?.address,xdr:e.xdr,xdrType:"Transaction"},s=await this.sendEventToContentScript(u.XBULL_SIGN_XDR,t,crypto.randomUUID()),{detail:n}=s.data;return!n||n.error?{error:{code:n?.code||-1,message:n?.errorMessage||"Unexpected error"}}:{signedTxXdr:n.payload.signedXdr,signerAddress:n.payload.signerAddress}}async getNetwork(){try{await this.enableConnection()}catch(n){return{error:{code:n?.code||-1,message:n?.message||"Unexpected error"}}}const e={origin:window.origin,host:window.location.host},t=await this.sendEventToContentScript(u.XBULL_GET_NETWORK,e,crypto.randomUUID()),{detail:s}=t.data;return!s||s.error?{error:{code:s?.code||-1,message:s?.errorMessage||"Unexpected error"}}:{network:s.payload.network,networkPassphrase:s.payload.networkPassphrase}}}class _{constructor(e){this.closeCurrentPromises$=new h,this.closeObservables$=new h,this.initialResponse$=new h,this.initialResponseCompleted$=new h,this.connectResponse$=new h,this.connectResult$=new h,this.signResponse$=new h,this.signResult$=new h,this.closeCurrentPromisesSubscription=Pe(1e3,1e3).pipe(d(this.closeObservables$)).subscribe(()=>{this.target?.closed&&this.closeCurrentPromises$.next()}),this.onInititalResponseSubscription=this.initialResponse$.pipe(d(this.closeObservables$)).subscribe(o=>{const i=this.decryptFromReceiver({oneTimeCode:o.data.oneTimeCode,payload:o.data.message,senderPublicKey:o.data.publicKey});JSON.parse(i).providedSession===this.session()&&(this.targetPublicKey=o.data.publicKey,this.initialResponseCompleted$.next())}),this.onConnectResponseSubscription=this.connectResponse$.pipe(d(this.closeObservables$)).subscribe(o=>{if(!this.targetPublicKey)return void this.connectResult$.next({success:!1,message:"Wallet encryption public key is not provided, request rejected."});if(!o.data.success)return void this.connectResult$.next({success:!1,message:"Request rejected from the wallet"});const i=this.decryptFromReceiver({oneTimeCode:o.data.oneTimeCode,payload:o.data.message,senderPublicKey:this.targetPublicKey}),c=JSON.parse(i);this.connectResult$.next({success:!0,publicKey:c.publicKey})}),this.onSignResponseSubscription=this.signResponse$.pipe(d(this.closeObservables$)).subscribe(o=>{if(!this.targetPublicKey)return void this.signResult$.next({success:!1,message:"Wallet encryption public key is not provided, request rejected."});if(!o.data.success)return void this.signResult$.next({success:!1,message:"Request rejected from the wallet"});const i=this.decryptFromReceiver({oneTimeCode:o.data.oneTimeCode,payload:o.data.message,senderPublicKey:this.targetPublicKey}),c=JSON.parse(i);this.signResult$.next({success:!0,xdr:c.xdr})}),this.preferredTarget=e?.preferredTarget||"extension",this.walletUrl=e?.url||"https://wallet.xbull.app/connect";const t=y.box.keyPair(),s=l.encodeBase64(y.randomBytes(24));this.encryptForReceiver=o=>{const i=y.randomBytes(24),c=y.box(l.decodeUTF8(o.data),i,o.receiverPublicKey,t.secretKey);return{message:l.encodeBase64(c),oneTimeCode:l.encodeBase64(i)}},this.decryptFromReceiver=o=>{const i=y.box.open(l.decodeBase64(o.payload),l.decodeBase64(o.oneTimeCode),l.decodeBase64(o.senderPublicKey),t.secretKey);if(!i)throw new Error("Decrypted message is null");return l.encodeUTF8(i)},this.publicKey=()=>t.publicKey,this.session=()=>s.slice();const n=o=>{switch(o.data.type){case u.XBULL_INITIAL_RESPONSE:this.initialResponse$.next(o);break;case u.XBULL_CONNECT_RESPONSE:this.connectResponse$.next(o);break;case u.XBULL_SIGN_RESPONSE:this.signResponse$.next(o)}};window.addEventListener("message",n),this.closeObservables$.asObservable().pipe(A(1)).subscribe(()=>{window.removeEventListener("message",n)})}openWallet(){return this.target&&!this.target.closed&&(this.target.close(),this.target=null,this.closeCurrentPromises$.next()),this.target=window.open(`${this.walletUrl}?public=${encodeURIComponent(l.encodeBase64(this.publicKey()))}&session=${encodeURIComponent(this.session())}`,"xBull_Wallet_app","width=380,height=640,left=100,top=100"),x(this.initialResponseCompleted$.pipe(d(this.closeCurrentPromises$)).pipe(d(this.closeObservables$)))}closeWallet(){this.target&&(this.target?.close(),this.target=null)}async connect(e={canRequestPublicKey:!0,canRequestSign:!0}){const t=window?.webkit?.messageHandlers?.cordova_iab?new O:window.xBullSDK;if(t&&this.preferredTarget==="extension"){const s=await t.getAddress();if(M(s))throw s.error;return s.address}{if(await this.openWallet(),!this.target||!this.targetPublicKey)throw new Error("xBull Wallet is not open, we can't connect with it");const{message:s,oneTimeCode:n}=this.encryptForReceiver({data:JSON.stringify(e),receiverPublicKey:l.decodeBase64(this.targetPublicKey)}),o={type:u.XBULL_CONNECT,message:s,oneTimeCode:n};this.target.postMessage(o,"*");const i=this.connectResult$.asObservable().pipe(N(c=>c.success?(this.closeWallet(),B(c.publicKey)):(this.closeWallet(),$(()=>new Error(c.message))))).pipe(A(1)).pipe(d(this.closeCurrentPromises$)).pipe(d(this.closeObservables$));return x(i)}}async sign(e){const t=window?.webkit?.messageHandlers?.cordova_iab?new O:window.xBullSDK;if(t&&this.preferredTarget==="extension"){const s=await t.signTransaction({xdr:e.xdr,opts:{networkPassphrase:e.network,address:e.publicKey}});if(M(s))throw s.error;return s.signedTxXdr}{if(await this.openWallet(),!this.target||!this.targetPublicKey)throw new Error("xBull Wallet is not open, we can't connect with it");if(typeof e.xdr!="string")throw new Error("XDR provided needs to be a string value");const{message:s,oneTimeCode:n}=this.encryptForReceiver({data:JSON.stringify(e),receiverPublicKey:l.decodeBase64(this.targetPublicKey)}),o={type:u.XBULL_SIGN,message:s,oneTimeCode:n};this.target.postMessage(o,"*");const i=this.signResult$.asObservable().pipe(N(c=>c.success?(this.closeWallet(),B(c.xdr)):(this.closeWallet(),$(()=>new Error(c.message))))).pipe(A(1)).pipe(d(this.closeCurrentPromises$)).pipe(d(this.closeObservables$));return x(i)}}closeConnections(){this.closeObservables$.next(),this.closeCurrentPromises$.next(),this.closeObservables$.complete(),this.closeCurrentPromises$.complete()}}const Me="xbull";class Xe{constructor(){this.moduleType=g.HOT_WALLET,this.productId=Me,this.productName="xBull",this.productUrl="https://xbull.app",this.productIcon="https://stellar.creit.tech/wallet-icons/xbull.png"}async isAvailable(){return!0}async getAddress(){try{const e=new _,t=await e.connect();return e.closeConnections(),{address:t}}catch(e){throw a(e)}}async signTransaction(e,t){try{const s=new _,n=await s.sign({xdr:e,publicKey:t?.address,network:t?.networkPassphrase});return s.closeConnections(),{signedTxXdr:n,signerAddress:t?.address}}catch(s){throw a(s)}}async signAuthEntry(){throw{code:-3,message:'xBull does not support the "signAuthEntry" function'}}async signMessage(){throw{code:-3,message:'xBull does not support the "signMessage" function'}}async getNetwork(){throw{code:-3,message:'xBull does not support the "getNetwork" function'}}}const Ne="hot-wallet";class qe{constructor(){this.moduleType=g.HOT_WALLET,this.productId=Ne,this.productName="HOT Wallet",this.productUrl="https://hot-labs.org/wallet",this.productIcon="https://storage.herewallet.app/logo.png"}async isAvailable(){return!0}async getAddress(){return await E.HOT.request("stellar:getAddress",{})}async signTransaction(e,t){return await E.HOT.request("stellar:signTransaction",{xdr:e,accountToSign:t?.address})}async signAuthEntry(e,t){return await E.HOT.request("stellar:signAuthEntry",{authEntry:e,accountToSign:t?.address})}async signMessage(e,t){return await E.HOT.request("stellar:signMessage",{message:e,accountToSign:t?.address})}async getNetwork(){return{network:"mainnet",networkPassphrase:b.PUBLIC}}}const Ue="hana";class Fe{constructor(){this.moduleType=g.HOT_WALLET,this.productId=Ue,this.productName="Hana Wallet",this.productUrl="https://hanawallet.io/",this.productIcon="https://stellar.creit.tech/wallet-icons/hana.png"}async runChecks(){if(!await this.isAvailable())throw new Error("Hana Wallet is not installed")}isAvailable(){return new Promise(e=>e(typeof window<"u"&&!!window.hanaWallet?.stellar))}async getAddress(){return this.runChecks().then(()=>window.hanaWallet.stellar.getPublicKey()).then(e=>({address:e})).catch(e=>{throw a(e)})}async signTransaction(e,t){return this.runChecks().then(()=>window.hanaWallet.stellar.signTransaction({xdr:e,accountToSign:t?.address,networkPassphrase:t?.networkPassphrase})).then(s=>({signedTxXdr:s,signerAddress:t?.address})).catch(s=>{throw a(s)})}async signAuthEntry(e,t){return this.runChecks().then(()=>window.hanaWallet.stellar.signAuthEntry({xdr:e,accountToSign:t?.address})).then(s=>({signedAuthEntry:s,signerAddress:t?.address})).catch(s=>{throw a(s)})}async signMessage(e,t){return this.runChecks().then(()=>window.hanaWallet.stellar.signMessage({message:e,accountToSign:t?.address})).then(s=>({signedMessage:s,signerAddress:t?.address})).catch(s=>{throw a(s)})}async getNetwork(){throw{code:-3,message:'Hana does not support the "getNetwork" function'}}}export{Le as ALBEDO_ID,_e as AlbedoModule,Ie as FREIGHTER_ID,Ke as FreighterModule,Ue as HANA_ID,Ne as HOTWALLET_ID,Fe as HanaModule,qe as HotWalletModule,Se as LOBSTR_ID,He as LobstrModule,g as ModuleType,Re as RABET_ID,De as RabetModule,Je as StellarSelectorModal,je as StellarWalletsButton,Oe as StellarWalletsKit,ze as StellarWalletsModal,b as WalletNetwork,Me as XBULL_ID,a as parseError,Xe as xBullModule};
